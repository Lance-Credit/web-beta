<template>
    <div
      @click.self="emit('@close-paystack-direct-debit-modal')"
      class="fixed z-20 top-0 py-[92px] px-6 left-0 w-screen h-screen bg-lance-black-70 backdrop-blur-[2px] flex justify-center items-center"
    >
        <div class="bg-white h-full sm:h-auto w-full sm:w-[466px] px-6 sm:px-10 p-10 sm:rounded-3xl flex flex-col gap-8 overflow-scroll sm:overflow-hidden">
            <div class="w-[192px] h-[192px] rounded-full bg-[#D6F0AD] flex items-center justify-center mx-auto shrink-0">
                <Loader-CircularBar />
            </div>
            <div class="text-center">
                <div class="mb-10 flex items-center justify-center gap-[12.54px]">
                    <svg width="110" height="16" viewBox="0 0 110 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3.95163 12.3299C3.95163 12.4047 4.01227 12.4653 4.08708 12.4653H8.24999C8.32479 12.4653 8.38543 12.5259 8.38543 12.6007V14.7857C8.38543 14.8605 8.32479 14.9212 8.24999 14.9212H0.702341C0.627536 14.9212 0.566895 14.8605 0.566895 14.7857V1.99588C0.566895 1.92107 0.627536 1.86043 0.702342 1.86043H3.81618C3.89099 1.86043 3.95163 1.92107 3.95163 1.99587V12.3299Z" fill="#181818"/>
                        <path d="M8.73306 9.71175C8.73306 8.64506 8.94419 7.70861 9.36646 6.90239C9.80192 6.09617 10.3891 5.47601 11.1281 5.04189C11.8671 4.60777 12.6918 4.39071 13.6023 4.39071C14.3809 4.39071 15.0605 4.53955 15.6411 4.83723C16.0799 5.0572 16.443 5.32796 16.7305 5.64951C16.8202 5.74985 17.0069 5.68978 17.0069 5.55519V4.675C17.0069 4.60019 17.0675 4.53955 17.1423 4.53955H20.2561C20.3309 4.53955 20.3916 4.60019 20.3916 4.675V14.7857C20.3916 14.8605 20.3309 14.9212 20.2561 14.9212H17.1423C17.0675 14.9212 17.0069 14.8605 17.0069 14.7857V13.8904C17.0069 13.7571 16.8248 13.6971 16.7354 13.7959C16.4384 14.1242 16.067 14.4 15.6213 14.6235C15.0407 14.9212 14.3611 15.07 13.5825 15.07C12.6852 15.07 11.8671 14.8529 11.1281 14.4188C10.3891 13.9723 9.80192 13.3459 9.36646 12.5397C8.94419 11.7211 8.73306 10.7784 8.73306 9.71175ZM17.0069 9.73036C17.0069 8.93654 16.7693 8.31017 16.2943 7.85125C15.8324 7.39232 15.265 7.16286 14.592 7.16286C13.919 7.16286 13.345 7.39232 12.87 7.85125C12.4081 8.29777 12.1772 8.91794 12.1772 9.71175C12.1772 10.5056 12.4081 11.1381 12.87 11.6095C13.345 12.0684 13.919 12.2979 14.592 12.2979C15.265 12.2979 15.8324 12.0684 16.2943 11.6095C16.7693 11.1505 17.0069 10.5242 17.0069 9.73036Z" fill="#181818"/>
                        <path d="M28.9764 4.42792C30.2696 4.42792 31.2988 4.82483 32.0642 5.61864C32.8427 6.40006 33.232 7.47915 33.232 8.85592V14.7857C33.232 14.8605 33.1714 14.9212 33.0966 14.9212H30.0025C29.9277 14.9212 29.8671 14.8605 29.8671 14.7857V9.28384C29.8671 8.58925 29.6757 8.0497 29.2931 7.6652C28.9104 7.28069 28.3957 7.08844 27.7491 7.08844C27.1026 7.08844 26.5879 7.28069 26.2052 7.6652C25.8226 8.0497 25.6312 8.58925 25.6312 9.28384V14.7857C25.6312 14.8605 25.5706 14.9212 25.4958 14.9212H22.3819C22.3071 14.9212 22.2465 14.8605 22.2465 14.7857V4.675C22.2465 4.60019 22.3071 4.53955 22.3819 4.53955H25.4958C25.5706 4.53955 25.6312 4.60019 25.6312 4.675V5.50894C25.6312 5.63921 25.8047 5.70007 25.8954 5.60655C26.2001 5.29237 26.5739 5.03593 27.0168 4.83723C27.5974 4.56436 28.2506 4.42792 28.9764 4.42792Z" fill="#181818"/>
                        <path d="M34.3173 9.73036C34.3173 8.65127 34.5482 7.70861 35.0101 6.90239C35.4851 6.09617 36.1383 5.47601 36.9696 5.04189C37.8142 4.60777 38.7775 4.39071 39.8595 4.39071C41.2451 4.39071 42.3997 4.7318 43.3234 5.41399C44.2182 6.06545 44.818 6.97141 45.1231 8.13187C45.1453 8.21628 45.0807 8.29777 44.9935 8.29777H41.655C41.5989 8.29777 41.5488 8.26288 41.5269 8.2112C41.2144 7.4751 40.6388 7.10705 39.8002 7.10705C39.1799 7.10705 38.6851 7.33651 38.3156 7.79543C37.9461 8.24195 37.7614 8.88693 37.7614 9.73036C37.7614 10.5738 37.9461 11.225 38.3156 11.6839C38.6851 12.1304 39.1799 12.3537 39.8002 12.3537C40.6388 12.3537 41.2144 11.9856 41.5269 11.2495C41.5488 11.1978 41.5989 11.1629 41.655 11.1629H44.9927C45.0802 11.1629 45.1448 11.2449 45.1221 11.3294C44.8167 12.466 44.2172 13.3656 43.3234 14.0281C42.3865 14.7227 41.2319 15.07 39.8595 15.07C38.7775 15.07 37.8142 14.8529 36.9696 14.4188C36.1383 13.9847 35.4851 13.3645 35.0101 12.5583C34.5482 11.7521 34.3173 10.8095 34.3173 9.73036Z" fill="#181818"/>
                        <path d="M56.7925 9.56291C56.7925 9.82379 56.7773 10.0942 56.7469 10.3741C56.7395 10.4421 56.6817 10.4932 56.6133 10.4932H49.2199C49.1407 10.4932 49.0782 10.5609 49.088 10.6395C49.1602 11.2136 49.3729 11.661 49.7261 11.9816C50.122 12.3165 50.6036 12.4839 51.1711 12.4839C51.9835 12.4839 52.5578 12.174 52.894 11.5542C52.9186 11.5088 52.9654 11.4792 53.017 11.4792H56.3582C56.4474 11.4792 56.5122 11.564 56.4856 11.6492C56.293 12.2638 55.9731 12.8211 55.5257 13.3211C55.0506 13.8669 54.4502 14.2948 53.7245 14.6049C52.9987 14.915 52.1871 15.07 51.2898 15.07C50.2078 15.07 49.2445 14.8529 48.3999 14.4188C47.5554 13.9847 46.8956 13.3645 46.4206 12.5583C45.9455 11.7521 45.708 10.8095 45.708 9.73036C45.708 8.65127 45.9389 7.70861 46.4008 6.90239C46.8758 6.09617 47.5356 5.47601 48.3801 5.04189C49.2247 4.60777 50.1946 4.39071 51.2898 4.39071C52.3587 4.39071 53.3088 4.60157 54.1401 5.02328C54.9715 5.445 55.618 6.04656 56.0799 6.82797C56.555 7.60938 56.7925 8.52103 56.7925 9.56291ZM53.1931 8.72569C53.2679 8.72569 53.3291 8.66492 53.3244 8.59026C53.2939 8.10765 53.0973 7.71868 52.7348 7.42333C52.3389 7.10085 51.844 6.9396 51.2502 6.9396C50.6828 6.9396 50.2012 7.09464 49.8053 7.40473C49.4583 7.68587 49.2307 8.07408 49.1224 8.56935C49.1045 8.65086 49.1684 8.72569 49.2518 8.72569H53.1931Z" fill="#181818"/>
                        <path d="M57.7072 9.84199C57.7072 8.7877 57.9315 7.86985 58.3802 7.08844C58.8288 6.29463 59.449 5.68686 60.2408 5.26515C61.0325 4.83103 61.9364 4.61397 62.9525 4.61397C64.2853 4.61397 65.3806 4.92406 66.2383 5.54422C67.0636 6.1319 67.6104 6.92005 67.8788 7.90868C67.9017 7.99296 67.8371 8.07451 67.7498 8.07451H66.5417C66.4797 8.07451 66.4259 8.03221 66.4088 7.97257C66.2132 7.28953 65.8199 6.75295 65.2288 6.36285C64.6218 5.94113 63.863 5.73028 62.9525 5.73028C62.2268 5.73028 61.5736 5.88532 60.9929 6.1954C60.4123 6.50548 59.9505 6.97061 59.6074 7.59078C59.2775 8.19854 59.1125 8.94895 59.1125 9.84199C59.1125 10.735 59.2775 11.4916 59.6074 12.1118C59.9505 12.732 60.4123 13.1971 60.9929 13.5072C61.5736 13.8173 62.2268 13.9723 62.9525 13.9723C63.863 13.9723 64.6218 13.7677 65.2288 13.3583C65.8203 12.9562 66.2137 12.4074 66.4091 11.7119C66.426 11.652 66.4799 11.6095 66.5422 11.6095H67.7488C67.8365 11.6095 67.9011 11.6915 67.8776 11.7759C67.6088 12.7409 67.0623 13.5226 66.2383 14.1211C65.3674 14.7537 64.2721 15.07 62.9525 15.07C61.9364 15.07 61.0325 14.8591 60.2408 14.4374C59.449 14.0033 58.8288 13.3955 58.3802 12.6141C57.9315 11.8203 57.7072 10.8963 57.7072 9.84199Z" fill="#181818"/>
                        <path d="M71.2715 5.97208C71.2715 6.11621 71.4898 6.17252 71.5738 6.05543C71.8548 5.66401 72.2158 5.34476 72.657 5.0977C73.2588 4.76777 73.9855 4.59456 74.8374 4.57806C74.9122 4.57662 74.9729 4.6374 74.9729 4.71221V5.79948C74.9729 5.87429 74.9123 5.93493 74.8375 5.93493H74.5968C73.5939 5.93493 72.789 6.1892 72.182 6.69774C71.575 7.20627 71.2715 8.0559 71.2715 9.24663V14.7857C71.2715 14.8605 71.2108 14.9212 71.136 14.9212H70.0214C69.9465 14.9212 69.8859 14.8605 69.8859 14.7857V4.89826C69.8859 4.82346 69.9465 4.76281 70.0214 4.76281H71.136C71.2108 4.76281 71.2715 4.82346 71.2715 4.89826V5.97208Z" fill="#181818"/>
                        <path d="M86.2416 9.32105C86.2416 9.6965 86.2323 9.99741 86.2136 10.2238C86.2079 10.2925 86.1498 10.3443 86.0809 10.3443H77.378C77.3005 10.3443 77.2386 10.4093 77.2447 10.4866C77.3003 11.1947 77.4951 11.8047 77.8292 12.3165C78.1855 12.8622 78.654 13.2777 79.2346 13.563C79.8152 13.8359 80.4486 13.9723 81.1348 13.9723C82.0321 13.9723 82.7843 13.7677 83.3913 13.3583C83.9821 12.9685 84.3813 12.4491 84.5889 11.8004C84.6073 11.7428 84.6602 11.7025 84.7207 11.7025H85.9071C85.996 11.7025 86.0608 11.7869 86.0347 11.8719C85.7531 12.7876 85.2018 13.5436 84.381 14.1398C83.5232 14.7599 82.4412 15.07 81.1348 15.07C80.1187 15.07 79.2082 14.8591 78.4033 14.4374C77.5983 14.0033 76.9649 13.3955 76.5031 12.6141C76.0544 11.8203 75.8301 10.8963 75.8301 9.84199C75.8301 8.7877 76.0544 7.86365 76.5031 7.06984C76.9517 6.27602 77.5785 5.66826 78.3835 5.24654C79.1884 4.82483 80.1055 4.61397 81.1348 4.61397C82.1641 4.61397 83.0614 4.82483 83.8267 5.24654C84.6053 5.66826 85.1991 6.23881 85.6082 6.95821C86.0305 7.6652 86.2416 8.45281 86.2416 9.32105ZM84.7031 9.28384C84.777 9.28384 84.8375 9.22458 84.8367 9.1507C84.8293 8.4513 84.6642 7.8507 84.3414 7.34891C84.0115 6.81557 83.5562 6.41246 82.9756 6.13959C82.395 5.86671 81.7616 5.73028 81.0754 5.73028C80.0461 5.73028 79.1686 6.04036 78.4428 6.66053C77.7484 7.25389 77.35 8.08002 77.2475 9.13891C77.2399 9.21708 77.3022 9.28384 77.3807 9.28384H84.7031Z" fill="#181818"/>
                        <path d="M87.5494 9.82338C87.5494 8.7815 87.7737 7.86985 88.2224 7.08844C88.671 6.29463 89.2846 5.68686 90.0632 5.26515C90.8549 4.83103 91.7456 4.61397 92.7353 4.61397C93.6854 4.61397 94.5432 4.83103 95.3085 5.26515C95.89 5.59497 96.3534 5.99997 96.6988 6.48014C96.7818 6.59556 96.991 6.53955 96.991 6.39738V1.28888C96.991 1.21408 97.0516 1.15344 97.1264 1.15344H98.2411C98.3159 1.15344 98.3766 1.21408 98.3766 1.28888V14.7857C98.3766 14.8605 98.3159 14.9212 98.2411 14.9212H97.1264C97.0516 14.9212 96.991 14.8605 96.991 14.7857V13.2619C96.991 13.117 96.7705 13.0615 96.6886 13.181C96.3634 13.655 95.9232 14.0614 95.3679 14.4002C94.6157 14.8467 93.7316 15.07 92.7155 15.07C91.7259 15.07 90.8351 14.8529 90.0434 14.4188C89.2648 13.9847 88.6512 13.3707 88.2026 12.5769C87.7671 11.7831 87.5494 10.8653 87.5494 9.82338ZM96.991 9.84199C96.991 9.02337 96.8129 8.30397 96.4566 7.6838C96.1003 7.06364 95.612 6.58611 94.9918 6.25122C94.3848 5.91633 93.7118 5.74888 92.9729 5.74888C92.2075 5.74888 91.5213 5.91012 90.9143 6.23261C90.3073 6.5551 89.8257 7.02643 89.4694 7.64659C89.1263 8.25436 88.9547 8.97995 88.9547 9.82338C88.9547 10.6544 89.1263 11.3862 89.4694 12.0188C89.8257 12.6389 90.3073 13.1165 90.9143 13.4514C91.5213 13.7739 92.2075 13.9351 92.9729 13.9351C93.7118 13.9351 94.3848 13.7677 94.9918 13.4328C95.612 13.0979 96.1003 12.6203 96.4566 12.0002C96.8129 11.38 96.991 10.6606 96.991 9.84199Z" fill="#181818"/>
                        <path d="M101.639 2.84649C101.362 2.84649 101.124 2.75347 100.926 2.56742C100.728 2.38137 100.629 2.15191 100.629 1.87903C100.629 1.60616 100.728 1.3829 100.926 1.20925C101.124 1.0232 101.362 0.930176 101.639 0.930176C101.916 0.930176 102.153 1.0232 102.351 1.20925C102.549 1.3829 102.648 1.60616 102.648 1.87903C102.648 2.15191 102.549 2.38137 102.351 2.56742C102.153 2.75347 101.916 2.84649 101.639 2.84649ZM102.196 4.76281C102.271 4.76281 102.331 4.82346 102.331 4.89826V14.7857C102.331 14.8605 102.271 14.9212 102.196 14.9212H101.081C101.007 14.9212 100.946 14.8605 100.946 14.7857V4.89826C100.946 4.82346 101.007 4.76281 101.081 4.76281H102.196Z" fill="#181818"/>
                        <path d="M106.812 5.86051C106.737 5.86051 106.676 5.92115 106.676 5.99596V12.1676C106.676 12.7878 106.802 13.2157 107.053 13.4514C107.303 13.687 107.745 13.8049 108.379 13.8049H109.51C109.585 13.8049 109.646 13.8655 109.646 13.9403V14.7857C109.646 14.8605 109.585 14.9212 109.51 14.9212H108.161C107.185 14.9212 106.459 14.7103 105.984 14.2886C105.509 13.8545 105.271 13.1475 105.271 12.1676V5.99596C105.271 5.92115 105.21 5.86051 105.136 5.86051H103.902C103.827 5.86051 103.767 5.79987 103.767 5.72506V4.89826C103.767 4.82346 103.827 4.76281 103.902 4.76281H105.136C105.21 4.76281 105.271 4.70217 105.271 4.62737V2.34937C105.271 2.27456 105.332 2.21392 105.407 2.21392H106.541C106.616 2.21392 106.676 2.27456 106.676 2.34937V4.62737C106.676 4.70217 106.737 4.76281 106.812 4.76281H109.51C109.585 4.76281 109.646 4.82346 109.646 4.89826V5.72506C109.646 5.79987 109.585 5.86051 109.51 5.86051H106.812Z" fill="#181818"/>
                    </svg>
                    <svg width="32" height="10" viewBox="0 0 32 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="4.4275" cy="4.99976" r="4.24195" fill="#0A4F4D"/>
                        <circle cx="15.7395" cy="4.99976" r="4.24195" fill="#F0F1ED"/>
                        <circle cx="27.0515" cy="4.99976" r="4.24195" fill="#F0F1ED"/>
                    </svg>
                    <svg width="102" height="18" viewBox="0 0 102 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.4784 2.00366H0.940541C0.485911 2.00366 0.0986328 2.39094 0.0986328 2.8624V4.39468C0.0986328 4.86615 0.485911 5.25343 0.940541 5.25343H14.4784C14.9499 5.25343 15.3203 4.86615 15.3372 4.39468V2.87924C15.3372 2.39094 14.9499 2.00366 14.4784 2.00366ZM14.4784 10.5069H0.940541C0.721645 10.5069 0.502749 10.5911 0.351205 10.7595C0.182824 10.9279 0.0986328 11.1299 0.0986328 11.3657V12.898C0.0986328 13.3694 0.485911 13.7567 0.940541 13.7567H14.4784C14.9499 13.7567 15.3203 13.3863 15.3372 12.898V11.3657C15.3203 10.8774 14.9499 10.5069 14.4784 10.5069ZM8.56823 14.7502H0.940541C0.721645 14.7502 0.502749 14.8343 0.351205 15.0027C0.199662 15.1711 0.0986328 15.3732 0.0986328 15.6089V17.1412C0.0986328 17.6126 0.485911 17.9999 0.940541 17.9999H8.55139C9.02286 17.9999 9.3933 17.6126 9.3933 17.158V15.6257C9.41014 15.1206 9.0397 14.7502 8.56823 14.7502ZM15.3372 6.24688H0.940541C0.721645 6.24688 0.502749 6.33107 0.351205 6.49945C0.199662 6.66783 0.0986328 6.86989 0.0986328 7.10562V8.6379C0.0986328 9.10937 0.485911 9.49665 0.940541 9.49665H15.3203C15.7918 9.49665 16.1622 9.10937 16.1622 8.6379V7.10562C16.1791 6.65099 15.7918 6.26372 15.3372 6.24688Z" fill="#2DBDEF"/>
                        <path d="M31.1184 5.13564C30.6975 4.69785 30.2092 4.36109 29.6535 4.12535C29.0978 3.88962 28.5085 3.77175 27.9023 3.77175C27.313 3.75491 26.7405 3.88962 26.2017 4.14219C25.8481 4.31057 25.5282 4.5463 25.2587 4.83255V4.56314C25.2587 4.42844 25.2082 4.29373 25.124 4.1927C25.0398 4.09167 24.9051 4.02432 24.7536 4.02432H22.8846C22.7499 4.02432 22.6152 4.07484 22.531 4.1927C22.4299 4.29373 22.3794 4.42844 22.3963 4.56314V17.1581C22.3963 17.2928 22.4468 17.4275 22.531 17.5285C22.632 17.6296 22.7499 17.6801 22.8846 17.6801H24.8041C24.9388 17.6801 25.0567 17.6296 25.1577 17.5285C25.2587 17.4443 25.3261 17.3096 25.3093 17.1581V12.8475C25.5787 13.1506 25.9323 13.3695 26.3195 13.5042C26.8247 13.6894 27.3467 13.7905 27.8855 13.7905C28.4917 13.7905 29.0978 13.6726 29.6535 13.4369C30.2092 13.2011 30.7143 12.8644 31.1353 12.4266C31.5731 11.9719 31.9098 11.4331 32.1456 10.8438C32.415 10.1871 32.5328 9.47989 32.516 8.77269C32.5328 8.06548 32.3981 7.35828 32.1456 6.68475C31.893 6.12909 31.5562 5.59027 31.1184 5.13564ZM29.4009 9.69879C29.2999 9.9682 29.1484 10.2039 28.9463 10.4228C28.559 10.8438 28.0034 11.0795 27.4309 11.0795C27.1446 11.0795 26.8584 11.029 26.589 10.8943C26.3364 10.7764 26.1007 10.6249 25.8986 10.4228C25.6965 10.2208 25.545 9.9682 25.444 9.69879C25.2251 9.12629 25.2251 8.50328 25.444 7.93078C25.545 7.66137 25.7134 7.42563 25.8986 7.22357C26.1007 7.02151 26.3364 6.85313 26.589 6.73527C26.8584 6.6174 27.1446 6.55005 27.4309 6.55005C27.734 6.55005 28.0034 6.60056 28.2896 6.73527C28.5422 6.85313 28.7779 7.00468 28.9631 7.20673C29.1652 7.40879 29.2999 7.64453 29.4178 7.91394C29.6198 8.50327 29.603 9.12629 29.4009 9.69879ZM42.8041 4.04116H40.9014C40.7667 4.04116 40.632 4.09167 40.5478 4.1927C40.4468 4.29373 40.3963 4.42843 40.3963 4.57998V4.81572C40.1605 4.52947 39.8574 4.31057 39.5375 4.15902C39.0155 3.90645 38.443 3.78859 37.8705 3.78859C36.6413 3.78859 35.4795 4.27689 34.6039 5.13564C34.1493 5.59027 33.7957 6.12909 33.56 6.71843C33.2906 7.37512 33.1558 8.08232 33.1727 8.80636C33.1558 9.51356 33.2906 10.2208 33.56 10.8943C33.8125 11.4836 34.1493 12.0225 34.6039 12.4771C35.4627 13.3527 36.6413 13.841 37.8537 13.841C38.4262 13.8578 38.9987 13.7231 39.5207 13.4705C39.8406 13.3022 40.1605 13.0833 40.3963 12.8138V13.0664C40.3963 13.2011 40.4468 13.3358 40.5478 13.4369C40.6488 13.521 40.7667 13.5884 40.9014 13.5884H42.8041C42.9388 13.5884 43.0735 13.5379 43.1577 13.4369C43.2587 13.3358 43.3093 13.2011 43.3093 13.0664V4.59682C43.3093 4.46211 43.2587 4.32741 43.1746 4.22638C43.0735 4.10851 42.9388 4.04116 42.8041 4.04116ZM40.2279 9.69879C40.1268 9.9682 39.9753 10.2039 39.7732 10.4228C39.5712 10.6249 39.3523 10.7933 39.0997 10.9111C38.5609 11.1637 37.9379 11.1637 37.3991 10.9111C37.1465 10.7933 36.9108 10.6249 36.7087 10.4228C36.5066 10.2208 36.3551 9.9682 36.2541 9.69879C36.052 9.12629 36.052 8.50328 36.2541 7.93078C36.3551 7.66137 36.5066 7.44247 36.7087 7.22357C36.9108 7.02151 37.1297 6.85313 37.3991 6.73527C37.9379 6.48269 38.5609 6.48269 39.0829 6.73527C39.3355 6.85313 39.5712 7.00468 39.7564 7.20673C39.9416 7.40879 40.0932 7.64453 40.211 7.91394C40.4468 8.50327 40.4468 9.12629 40.2279 9.69879ZM61.7639 8.55379C61.4945 8.31805 61.1746 8.116 60.8378 7.98129C60.4842 7.82975 60.0969 7.72872 59.7265 7.64453L58.2784 7.35828C57.908 7.29092 57.6385 7.1899 57.5038 7.07203C57.386 6.98784 57.3018 6.85313 57.3018 6.70159C57.3018 6.55005 57.386 6.41534 57.5712 6.29747C57.8238 6.16277 58.0932 6.09541 58.3794 6.11225C58.7499 6.11225 59.1203 6.19645 59.4571 6.33115C59.7938 6.4827 60.1138 6.63424 60.4168 6.8363C60.8378 7.10571 61.2082 7.05519 61.4608 6.75211L62.1512 5.96071C62.2859 5.826 62.3532 5.65762 62.3701 5.4724C62.3532 5.27035 62.2522 5.10196 62.1007 4.96726C61.8144 4.71469 61.3429 4.44527 60.7199 4.17586C60.0969 3.90645 59.3055 3.77175 58.3794 3.77175C57.8069 3.75491 57.2513 3.8391 56.7124 4.00748C56.2578 4.15903 55.82 4.37792 55.4327 4.66417C55.0791 4.93358 54.8097 5.27034 54.6077 5.67446C54.4225 6.06174 54.3214 6.48269 54.3214 6.90365C54.3214 7.69504 54.5572 8.33489 55.0286 8.80636C55.5001 9.27783 56.1231 9.59775 56.8977 9.7493L58.4131 10.0861C58.733 10.1366 59.0698 10.2376 59.3729 10.3891C59.5413 10.4565 59.6423 10.6249 59.6423 10.8101C59.6423 10.9785 59.5581 11.13 59.3729 11.2647C59.1877 11.3994 58.8846 11.4836 58.4804 11.4836C58.0763 11.4836 57.6554 11.3994 57.2849 11.2142C56.9313 11.0458 56.6114 10.8269 56.3083 10.5744C56.1736 10.4733 56.0389 10.3891 55.8705 10.3218C55.7022 10.2713 55.4833 10.3218 55.2644 10.507L54.4393 11.13C54.2036 11.2984 54.0857 11.5847 54.153 11.8541C54.2036 12.1403 54.4225 12.4097 54.8434 12.7297C55.8874 13.4369 57.1334 13.8073 58.3963 13.7736C58.9856 13.7736 59.5749 13.7063 60.1306 13.5379C60.6189 13.3863 61.0735 13.1674 61.4776 12.8644C61.8481 12.5949 62.1512 12.2413 62.3532 11.8204C62.5553 11.4163 62.6563 10.9785 62.6563 10.5239C62.6732 10.1197 62.589 9.71562 62.4206 9.34518C62.2522 9.07577 62.0333 8.78952 61.7639 8.55379ZM70.0819 10.8606C69.9978 10.7091 69.8462 10.608 69.661 10.5744C69.4926 10.5744 69.3074 10.6249 69.1727 10.7259C68.937 10.8775 68.6675 10.9616 68.3981 10.9785C68.3139 10.9785 68.2129 10.9616 68.1287 10.9448C68.0277 10.928 67.9435 10.8775 67.8761 10.8101C67.792 10.7259 67.7246 10.6249 67.6741 10.5239C67.6067 10.3555 67.5731 10.1871 67.5899 10.0187V6.56689H70.0483C70.1998 6.56689 70.3345 6.49953 70.4355 6.3985C70.5366 6.29747 70.6039 6.17961 70.6039 6.02806V4.56314C70.6039 4.4116 70.5534 4.27689 70.4355 4.1927C70.3345 4.09167 70.1998 4.04116 70.0651 4.04116H67.5899V1.68382C67.5899 1.54911 67.5394 1.39757 67.4384 1.31337C67.3373 1.22918 67.2195 1.17867 67.0848 1.16183H65.1652C65.0305 1.16183 64.8958 1.21235 64.7948 1.31337C64.6937 1.4144 64.6264 1.54911 64.6264 1.68382V4.04116H63.5319C63.3972 4.04116 63.2625 4.09167 63.1615 4.20954C63.0773 4.31057 63.0268 4.44527 63.0268 4.57998V6.0449C63.0268 6.17961 63.0773 6.31431 63.1615 6.41534C63.2457 6.53321 63.3804 6.58372 63.5319 6.58372H64.6264V10.6922C64.6095 11.1805 64.7106 11.6688 64.9126 12.1066C65.0979 12.4771 65.3336 12.797 65.6535 13.0664C65.9566 13.319 66.3102 13.5042 66.6975 13.6052C67.0848 13.7231 67.4889 13.7905 67.893 13.7905C68.415 13.7905 68.9538 13.7063 69.4589 13.5379C69.9304 13.3863 70.3514 13.1169 70.6881 12.7633C70.907 12.5444 70.9239 12.1908 70.7555 11.9383L70.0819 10.8606ZM80.4879 4.04116H78.5852C78.4505 4.04116 78.3327 4.09167 78.2316 4.1927C78.1306 4.29373 78.0801 4.42843 78.0801 4.57998V4.81572C77.8443 4.52947 77.5581 4.31057 77.2213 4.15902C76.6993 3.90645 76.1268 3.78859 75.5543 3.78859C74.3252 3.78859 73.1633 4.27689 72.2877 5.13564C71.8331 5.59027 71.4795 6.12909 71.2438 6.71843C70.9744 7.37512 70.8397 8.08232 70.8565 8.78952C70.8397 9.49672 70.9744 10.2039 71.2438 10.8775C71.4795 11.4668 71.85 12.0056 72.2877 12.4602C73.1465 13.3358 74.3083 13.8241 75.5375 13.8241C76.11 13.841 76.6825 13.7063 77.2045 13.4705C77.5413 13.3022 77.8443 13.0833 78.0801 12.8138V13.0664C78.0801 13.2011 78.1306 13.3358 78.2316 13.42C78.3327 13.521 78.4505 13.5716 78.5852 13.5716H80.4879C80.7742 13.5716 80.9931 13.3527 80.9931 13.0664V4.59682C80.9931 4.46211 80.9426 4.32741 80.8584 4.22638C80.7742 4.10851 80.6395 4.04116 80.4879 4.04116ZM77.9285 9.71562C77.8275 9.98503 77.676 10.2208 77.4739 10.4397C77.2718 10.6417 77.053 10.8101 76.8004 10.928C76.531 11.0458 76.2447 11.1132 75.9416 11.1132C75.6385 11.1132 75.3691 11.0458 75.0997 10.928C74.8471 10.8101 74.6114 10.6417 74.4094 10.4397C74.2073 10.2376 74.0558 9.98503 73.9716 9.71562C73.7695 9.14312 73.7695 8.52011 73.9716 7.94761C74.0726 7.6782 74.2241 7.44247 74.4094 7.24041C74.6114 7.03835 74.8471 6.86997 75.0997 6.75211C75.3691 6.63424 75.6554 6.56689 75.9416 6.56689C76.2279 6.56689 76.5141 6.6174 76.8004 6.75211C77.053 6.86997 77.2718 7.02151 77.4739 7.22357C77.676 7.42563 77.8275 7.66137 77.9285 7.93078C78.1474 8.48644 78.1474 9.14312 77.9285 9.71562ZM90.9276 10.7427L89.8331 9.90084C89.6311 9.73246 89.429 9.68195 89.2606 9.7493C89.1091 9.81665 88.9744 9.91768 88.8565 10.0355C88.6208 10.3218 88.3345 10.5744 88.0314 10.7933C87.6947 10.9785 87.3411 11.0795 86.9706 11.0458C86.5328 11.0458 86.1287 10.928 85.7751 10.6754C85.4215 10.4228 85.1521 10.0861 85.0174 9.66511C84.9164 9.37886 84.8659 9.09261 84.8659 8.80636C84.8659 8.50327 84.9164 8.21703 85.0174 7.91394C85.1184 7.64453 85.2531 7.40879 85.4552 7.20673C85.6573 7.00468 85.8761 6.8363 86.1287 6.73527C86.3981 6.6174 86.6844 6.55005 86.9875 6.55005C87.3579 6.53321 87.7283 6.63424 88.0483 6.81946C88.3682 7.02152 88.6376 7.27409 88.8733 7.57718C88.9744 7.69504 89.1091 7.79607 89.2606 7.86342C89.429 7.93077 89.6311 7.88026 89.8331 7.71188L90.9276 6.88681C91.0623 6.80262 91.1633 6.66791 91.2138 6.51637C91.2812 6.34799 91.2644 6.16277 91.1633 6.01122C90.7424 5.35453 90.1699 4.81571 89.4795 4.42844C88.7555 4.02432 87.8967 3.80543 86.937 3.80543C86.2634 3.80543 85.5899 3.94013 84.9501 4.1927C84.3439 4.44528 83.8051 4.79887 83.3504 5.25351C82.8958 5.70814 82.5254 6.24696 82.2728 6.85313C81.7508 8.11599 81.7508 9.5304 82.2728 10.7933C82.5254 11.3826 82.879 11.9383 83.3504 12.3761C84.3102 13.319 85.5899 13.8241 86.937 13.8241C87.8967 13.8241 88.7555 13.6052 89.4795 13.2011C90.1699 12.8138 90.7592 12.275 91.1802 11.6015C91.2644 11.45 91.2812 11.2647 91.2307 11.1132C91.1633 10.9785 91.0623 10.8438 90.9276 10.7427ZM101.064 12.7128L98.0501 8.30121L100.626 4.89991C100.744 4.74836 100.795 4.52947 100.727 4.34424C100.677 4.20954 100.559 4.07483 100.239 4.07483H98.2017C98.0838 4.07483 97.966 4.10851 97.8649 4.15902C97.7302 4.22638 97.6292 4.32741 97.5618 4.44528L95.5076 7.3246H95.0193V0.521984C95.0193 0.387279 94.9688 0.252571 94.8677 0.151542C94.7667 0.0505135 94.6488 0 94.5141 0H92.6114C92.4767 0 92.342 0.0505135 92.241 0.151542C92.14 0.252571 92.0894 0.370441 92.0894 0.521984V13.0664C92.0894 13.218 92.14 13.3358 92.241 13.4369C92.342 13.5379 92.4767 13.5884 92.6114 13.5884H94.5141C94.6488 13.5884 94.7835 13.5379 94.8677 13.4369C94.9688 13.3358 95.0193 13.2011 95.0193 13.0664V9.7493H95.5581L97.7976 13.1843C97.9323 13.4369 98.1848 13.5884 98.4543 13.5884H100.593C100.913 13.5884 101.047 13.4369 101.115 13.3022C101.199 13.0833 101.182 12.8644 101.064 12.7128ZM53.6142 4.058H51.4758C51.3074 4.058 51.1558 4.10851 51.038 4.22638C50.937 4.32741 50.8696 4.44527 50.8359 4.57998L49.2531 10.4397H48.8659L47.182 4.57998C47.1484 4.46211 47.0978 4.34425 47.0137 4.22638C46.9126 4.10851 46.7779 4.04116 46.6264 4.04116H44.4543C44.168 4.04116 43.9996 4.12535 43.9154 4.32741C43.8649 4.49579 43.8649 4.68101 43.9154 4.84939L46.6095 13.1001C46.6601 13.218 46.7106 13.3527 46.8116 13.4369C46.9126 13.5379 47.0642 13.5884 47.2157 13.5884H48.3607L48.2597 13.8578L48.0071 14.6155C47.9229 14.8513 47.7882 15.0533 47.5862 15.2049C47.4009 15.3396 47.182 15.4238 46.9463 15.4069C46.7442 15.4069 46.559 15.3564 46.3738 15.2891C46.1886 15.2049 46.0202 15.1038 45.8687 14.986C45.734 14.8849 45.5656 14.8344 45.3804 14.8344H45.3635C45.1615 14.8513 44.9762 14.9523 44.8752 15.1375L44.2017 16.131C43.9323 16.5688 44.0838 16.8382 44.2522 16.9897C44.6226 17.3265 45.0436 17.579 45.5151 17.7306C46.037 17.9158 46.5759 18 47.1147 18C48.0913 18 48.8995 17.7306 49.5225 17.2086C50.1624 16.6361 50.6507 15.8952 50.8864 15.0533L54.0183 4.84939C54.0857 4.66417 54.1025 4.47895 54.0352 4.31057C54.0183 4.1927 53.9005 4.04116 53.6142 4.058Z" fill="#131E32"/>
                    </svg>
                </div>
                <p class="mb-2 text-lance-black text-2xl tracking-[-0.24px] font-aventa">Authorise Secure Payments</p>
                <div v-if="addressFilled" class="text-lance-black-60 text-center">
                    <p class="mb-6">
                        We're about to initiate direct debit on your account to ensure seamless repayments.
                        This allows us to securely collect your scheduled payments without hassle.
                    </p>
                    <p class="mb-8">Please note that a charge of N50 will be required</p>
                    <button @click="continueDirectDebit" class="gap-4 btn btn-primary w-full" :class="{'loading' : continuingDirectDebit}" :disabled="continuingDirectDebit">
                        <span v-show="!continuingDirectDebit">Continue</span>
                        <Loader-Basic v-show="continuingDirectDebit" bg="#FFF" fg="#C3E48E" />
                    </button>
                </div>
                <div v-else class="text-lance-black-60 text-center">
                    <p class="mb-4">
                        We're about to initiate direct debit on your account to ensure seamless repayments.
                    </p>
                    <p class="mb-6">Please complete your profile by filling in your residential information.</p>
                    <div class="mb-6 text-left">
                        <Form-SelectInput
                            :options="stateListOptions" placeholder="State" label="State" v-model="settingsForm.state[0].value" class="mb-6"
                            v-bind="settingsForm.state[1].value" :error="settingsFormErrors.state" @@select-change="selectedState = $event"
                        />
                        <Form-SelectInput
                            :options="cityListOptions" placeholder="LGA" label="LGA" class="mb-6"
                            v-model="settingsForm.lga[0].value" v-bind="settingsForm.lga[1].value" :error="settingsFormErrors.lga"
                        />
                        <Form-TextInput
                            placeholder="Residential Address" label="Residential Address" v-model="settingsForm.residentialAddress[0].value"
                            v-bind="settingsForm.residentialAddress[1].value" :error="settingsFormErrors.residentialAddress"
                        />
                    </div>
                    <button @click="savePersonalDetails" class="gap-4 btn btn-primary w-full" :class="{'loading' : savingPersonalDetails}" :disabled="!personalDetailsFilled || savingPersonalDetails">
                        <span v-show="!savingPersonalDetails">Save changes</span>
                        <Loader-Basic v-show="savingPersonalDetails" bg="#FFF" fg="#C3E48E" />
                    </button>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup lang="ts">

    import * as yup from 'yup';

    const { apiFetch } = useApiFetch();

    const { userProfile } = storeToRefs(useUserStore());

    const addressFilled = computed(() => {
        if(
            userProfile.value?.address?.city &&
            userProfile.value?.address?.state &&
            userProfile.value?.address?.street
        ) {
            return true;
        }
        return false;
    });
    
    const { values: settingsFormValues, errors: settingsFormErrors, defineField } = useForm({
        validationSchema: yup.object({
            lga: yup.string().required().label('LGA'),
            state: yup.string().required().label('State'),
            residentialAddress: yup.string().required().label('Residential Address')
        })
    });

    const settingsForm = {
        lga : defineField('lga'),
        state : defineField('state'),
        residentialAddress : defineField('residentialAddress')
    };

    const selectedState: Ref<string> = ref(userProfile.value?.address.state || '');

        const stateListOptions = computed(()=>{
        const states = statesAndCities.map((state) => {
            return {
                label: `${state.name[0].toUpperCase()}${state.name.substring(1).toLowerCase()}`,
                value: `${state.name[0].toUpperCase()}${state.name.substring(1).toLowerCase()}`
            };
        });
        return states;
    });
    
    const cityListOptions = computed(()=>{
        const stateCities = statesAndCities.find((state) => state.name.toLowerCase() == selectedState.value.toLowerCase());

        const cities = stateCities?.cities.map((city: string) => {
            return {
                label: `${city[0].toUpperCase()}${city.substring(1).toLowerCase()}`,
                value: `${city[0].toUpperCase()}${city.substring(1).toLowerCase()}`
            }
        })
        return cities || [
            {
                label: 'City',
                value: ''
            }
        ];
    });

    const statesAndCities = [
        {
          "name": "Abia",
          "cities": [
            "Aba South",
            "Arochukwu",
            "Bende",
            "Ikwuano",
            "Isiala Ngwa North",
            "Isiala Ngwa South",
            "Isuikwuato",
            "Obi Ngwa",
            "Ohafia",
            "Osisioma",
            "Ugwunagbo",
            "Ukwa East",
            "Ukwa West",
            "Umuahia North",
            "Umuahia South",
            "Umu Nneochi"
          ]
        },
        {
          "name": "Adamawa",
          "cities": [
            "Fufure",
            "Ganye",
            "Gayuk",
            "Gombi",
            "Grie",
            "Hong",
            "Jada",
            "Lamurde",
            "Madagali",
            "Maiha",
            "Mayo Belwa",
            "Michika",
            "Mubi North",
            "Mubi South",
            "Numan",
            "Shelleng",
            "Song",
            "Toungo",
            "Yola North",
            "Yola South"
          ]
        },
        {
          "name": "Akwa Ibom",
          "cities": [
            "Eastern Obolo",
            "Eket",
            "Esit Eket",
            "Essien Udim",
            "Etim Ekpo",
            "Etinan",
            "Ibeno",
            "Ibesikpo Asutan",
            "Ibiono-Ibom",
            "Ika",
            "Ikono",
            "Ikot Abasi",
            "Ikot Ekpene",
            "Ini",
            "Itu",
            "Mbo",
            "Mkpat-Enin",
            "Nsit-Atai",
            "Nsit-Ibom",
            "Nsit-Ubium",
            "Obot Akara",
            "Okobo",
            "Onna",
            "Oron",
            "Oruk Anam",
            "Udung-Uko",
            "Ukanafun",
            "Uruan",
            "Urue-Offong/Oruko",
            "Uyo"
          ]
        },
        {
          "name": "Anambra",
          "cities": [
            "Anambra East",
            "Anambra West",
            "Anaocha",
            "Awka North",
            "Awka South",
            "Ayamelum",
            "Dunukofia",
            "Ekwusigo",
            "Idemili North",
            "Idemili South",
            "Ihiala",
            "Njikoka",
            "Nnewi North",
            "Nnewi South",
            "Ogbaru",
            "Onitsha North",
            "Onitsha South",
            "Orumba North",
            "Orumba South",
            "Oyi"
          ]
        },
        {
          "name": "Bauchi",
          "cities": [
            "Bauchi",
            "Bogoro",
            "Damban",
            "Darazo",
            "Dass",
            "Gamawa",
            "Ganjuwa",
            "Giade",
            "Itas/Gadau",
            "Jama'are",
            "Katagum",
            "Kirfi",
            "Misau",
            "Ningi",
            "Shira",
            "Tafawa Balewa",
            "Toro",
            "Warji",
            "Zaki"
          ]
        },
        {
          "name": "Bayelsa",
          "cities": [
            "Ekeremor",
            "Kolokuma/Opokuma",
            "Nembe",
            "Ogbia",
            "Sagbama",
            "Southern Ijaw",
            "Yenagoa"
          ]
        },
        {
          "name": "Benue",
          "cities": [
            "Apa",
            "Ado",
            "Buruku",
            "Gboko",
            "Guma",
            "Gwer East",
            "Gwer West",
            "Katsina-Ala",
            "Konshisha",
            "Kwande",
            "Logo",
            "Makurdi",
            "Obi",
            "Ogbadibo",
            "Ohimini",
            "Oju",
            "Okpokwu",
            "Oturkpo",
            "Tarka",
            "Ukum",
            "Ushongo",
            "Vandeikya"
          ]
        },
        {
          "name": "Borno",
          "cities": [
            "Askira/Uba",
            "Bama",
            "Bayo",
            "Biu",
            "Chibok",
            "Damboa",
            "Dikwa",
            "Gubio",
            "Guzamala",
            "Gwoza",
            "Hawul",
            "Jere",
            "Kaga",
            "Kala/Balge",
            "Konduga",
            "Kukawa",
            "Kwaya Kusar",
            "Mafa",
            "Magumeri",
            "Maiduguri",
            "Marte",
            "Mobbar",
            "Monguno",
            "Ngala",
            "Nganzai",
            "Shani"
          ]
        },
        {
          "name": "Cross River",
          "cities": [
            "Akamkpa",
            "Akpabuyo",
            "Bakassi",
            "Bekwarra",
            "Biase",
            "Boki",
            "Calabar Municipal",
            "Calabar South",
            "Etung",
            "Ikom",
            "Obanliku",
            "Obubra",
            "Obudu",
            "Odukpani",
            "Ogoja",
            "Yakuur",
            "Yala"
          ]
        },
        {
          "name": "Delta",
          "cities": [
            "Aniocha South",
            "Bomadi",
            "Burutu",
            "Ethiope East",
            "Ethiope West",
            "Ika North East",
            "Ika South",
            "Isoko North",
            "Isoko South",
            "Ndokwa East",
            "Ndokwa West",
            "Okpe",
            "Oshimili North",
            "Oshimili South",
            "Patani",
            "Sapele",
            "Udu",
            "Ughelli North",
            "Ughelli South",
            "Ukwuani",
            "Uvwie",
            "Warri North",
            "Warri South",
            "Warri South West"
          ]
        },
        {
          "name": "Ebonyi",
          "cities": [
            "Afikpo North",
            "Afikpo South",
            "Ebonyi",
            "Ezza North",
            "Ezza South",
            "Ikwo",
            "Ishielu",
            "Ivo",
            "Izzi",
            "Ohaozara",
            "Ohaukwu",
            "Onicha"
          ]
        },
        {
          "name": "Edo",
          "cities": [
            "Egor",
            "Esan Central",
            "Esan North-East",
            "Esan South-East",
            "Esan West",
            "Etsako Central",
            "Etsako East",
            "Etsako West",
            "Igueben",
            "Ikpoba Okha",
            "Orhionmwon",
            "Oredo",
            "Ovia North-East",
            "Ovia South-West",
            "Owan East",
            "Owan West",
            "Uhunmwonde"
          ]
        },
        {
          "name": "Ekiti",
          "cities": [
            "Efon",
            "Ekiti East",
            "Ekiti South-West",
            "Ekiti West",
            "Emure",
            "Gbonyin",
            "Ido Osi",
            "Ijero",
            "Ikere",
            "Ikole",
            "Ilejemeje",
            "Irepodun/Ifelodun",
            "Ise/Orun",
            "Moba",
            "Oye"
          ]
        },
        {
          "name": "Enugu",
          "cities": [
            "Awgu",
            "Enugu East",
            "Enugu North",
            "Enugu South",
            "Ezeagu",
            "Igbo Etiti",
            "Igbo Eze North",
            "Igbo Eze South",
            "Isi Uzo",
            "Nkanu East",
            "Nkanu West",
            "Nsukka",
            "Oji River",
            "Udenu",
            "Udi",
            "Uzo Uwani"
          ]
        },
        {
          "name": "FCT",
          "cities": ["Bwari", "Gwagwalada", "Kuje", "Kwali", "Municipal Area Council"]
        },
        {
          "name": "Gombe",
          "cities": [
            "Balanga",
            "Billiri",
            "Dukku",
            "Funakaye",
            "Gombe",
            "Kaltungo",
            "Kwami",
            "Nafada",
            "Shongom",
            "Yamaltu/Deba"
          ]
        },
        {
          "name": "Imo",
          "cities": [
            "Ahiazu Mbaise",
            "Ehime Mbano",
            "Ezinihitte",
            "Ideato North",
            "Ideato South",
            "Ihitte/Uboma",
            "Ikeduru",
            "Isiala Mbano",
            "Isu",
            "Mbaitoli",
            "Ngor Okpala",
            "Njaba",
            "Nkwerre",
            "Nwangele",
            "Obowo",
            "Oguta",
            "Ohaji/Egbema",
            "Okigwe",
            "Orlu",
            "Orsu",
            "Oru East",
            "Oru West",
            "Owerri Municipal",
            "Owerri North",
            "Owerri West",
            "Unuimo"
          ]
        },
        {
          "name": "Jigawa",
          "cities": [
            "Babura",
            "Biriniwa",
            "Birnin Kudu",
            "Buji",
            "Dutse",
            "Gagarawa",
            "Garki",
            "Gumel",
            "Guri",
            "Gwaram",
            "Gwiwa",
            "Hadejia",
            "Jahun",
            "Kafin Hausa",
            "Kazaure",
            "Kiri Kasama",
            "Kiyawa",
            "Kaugama",
            "Maigatari",
            "Malam Madori",
            "Miga",
            "Ringim",
            "Roni",
            "Sule Tankarkar",
            "Taura",
            "Yankwashi"
          ]
        },
        {
          "name": "Kaduna",
          "cities": [
            "Chikun",
            "Giwa",
            "Igabi",
            "Ikara",
            "Jaba",
            "Jema'a",
            "Kachia",
            "Kaduna North",
            "Kaduna South",
            "Kagarko",
            "Kajuru",
            "Kaura",
            "Kauru",
            "Kubau",
            "Kudan",
            "Lere",
            "Makarfi",
            "Sabon Gari",
            "Sanga",
            "Soba",
            "Zangon Kataf",
            "Zaria"
          ]
        },
        {
          "name": "Kano",
          "cities": [
            "Albasu",
            "Bagwai",
            "Bebeji",
            "Bichi",
            "Bunkure",
            "Dala",
            "Dambatta",
            "Dawakin Kudu",
            "Dawakin Tofa",
            "Doguwa",
            "Fagge",
            "Gabasawa",
            "Garko",
            "Garun Mallam",
            "Gaya",
            "Gezawa",
            "Gwale",
            "Gwarzo",
            "Kabo",
            "Kano Municipal",
            "Karaye",
            "Kibiya",
            "Kiru",
            "Kumbotso",
            "Kunchi",
            "Kura",
            "Madobi",
            "Makoda",
            "Minjibir",
            "Nasarawa",
            "Rano",
            "Rimin Gado",
            "Rogo",
            "Shanono",
            "Sumaila",
            "Takai",
            "Tarauni",
            "Tofa",
            "Tsanyawa",
            "Tudun Wada",
            "Ungogo",
            "Warawa",
            "Wudil"
          ]
        },
        {
          "name": "Katsina",
          "cities": [
            "Batagarawa",
            "Batsari",
            "Baure",
            "Bindawa",
            "Charanchi",
            "Dandume",
            "Danja",
            "Dan Musa",
            "Daura",
            "Dutsi",
            "Dutsin Ma",
            "Faskari",
            "Funtua",
            "Ingawa",
            "Jibia",
            "Kafur",
            "Kaita",
            "Kankara",
            "Kankia",
            "Katsina",
            "Kurfi",
            "Kusada",
            "Mai'Adua",
            "Malumfashi",
            "Mani",
            "Mashi",
            "Matazu",
            "Musawa",
            "Rimi",
            "Sabuwa",
            "Safana",
            "Sandamu",
            "Zango"
          ]
        },
        {
          "name": "Kebbi",
          "cities": [
            "Arewa Dandi",
            "Argungu",
            "Augie",
            "Bagudo",
            "Birnin Kebbi",
            "Bunza",
            "Dandi",
            "Fakai",
            "Gwandu",
            "Jega",
            "Kalgo",
            "Koko/Besse",
            "Maiyama",
            "Ngaski",
            "Sakaba",
            "Shanga",
            "Suru",
            "Wasagu/Danko",
            "Yauri",
            "Zuru"
          ]
        },
        {
          "name": "Kogi",
          "cities": [
            "Ajaokuta",
            "Ankpa",
            "Bassa",
            "Dekina",
            "Ibaji",
            "Idah",
            "Igalamela Odolu",
            "Ijumu",
            "Kabba/Bunu",
            "Kogi",
            "Lokoja",
            "Mopa Muro",
            "Ofu",
            "Ogori/Magongo",
            "Okehi",
            "Okene",
            "Olamaboro",
            "Omala",
            "Yagba East",
            "Yagba West"
          ]
        },
        {
          "name": "Kwara",
          "cities": [
            "Baruten",
            "Edu",
            "Ekiti",
            "Ifelodun",
            "Ilorin East",
            "Ilorin South",
            "Ilorin West",
            "Irepodun",
            "Isin",
            "Kaiama",
            "Moro",
            "Offa",
            "Oke Ero",
            "Oyun",
            "Pategi"
          ]
        },
        {
          "name": "Lagos",
          "cities": [
            "Ajeromi-Ifelodun",
            "Alimosho",
            "Amuwo-Odofin",
            "Apapa",
            "Badagry",
            "Epe",
            "Eti Osa",
            "Ibeju-Lekki",
            "Ifako-Ijaiye",
            "Ikeja",
            "Ikorodu",
            "Kosofe",
            "Lagos Island",
            "Lagos Mainland",
            "Mushin",
            "Ojo",
            "Oshodi-Isolo",
            "Shomolu",
            "Surulere"
          ]
        },
        {
          "name": "Nasarawa",
          "cities": [
            "Awe",
            "Doma",
            "Karu",
            "Keana",
            "Keffi",
            "Kokona",
            "Lafia",
            "Nasarawa",
            "Nasarawa Egon",
            "Obi",
            "Toto",
            "Wamba"
          ]
        },
        {
          "name": "Niger",
          "cities": [
            "Agwara",
            "Bida",
            "Borgu",
            "Bosso",
            "Chanchaga",
            "Edati",
            "Gbako",
            "Gurara",
            "Katcha",
            "Kontagora",
            "Lapai",
            "Lavun",
            "Magama",
            "Mariga",
            "Mashegu",
            "Mokwa",
            "Moya",
            "Paikoro",
            "Rafi",
            "Rijau",
            "Shiroro",
            "Suleja",
            "Tafa",
            "Wushishi"
          ]
        },
        {
          "name": "Ogun",
          "cities": [
            "Abeokuta South",
            "Ado-Odo/Ota",
            "Egbado North",
            "Egbado South",
            "Ewekoro",
            "Ifo",
            "Ijebu East",
            "Ijebu North",
            "Ijebu North East",
            "Ijebu Ode",
            "Ikenne",
            "Imeko Afon",
            "Ipokia",
            "Obafemi Owode",
            "Odeda",
            "Odogbolu",
            "Ogun Waterside",
            "Remo North",
            "Shagamu"
          ]
        },
        {
          "name": "Ondo",
          "cities": [
            "Akoko North-West",
            "Akoko South-West",
            "Akoko South-East",
            "Akure North",
            "Akure South",
            "Ese Odo",
            "Idanre",
            "Ifedore",
            "Ilaje",
            "Ile Oluji/Okeigbo",
            "Irele",
            "Odigbo",
            "Okitipupa",
            "Ondo East",
            "Ondo West",
            "Ose",
            "Owo"
          ]
        },
        {
          "name": "Osun",
          "cities": [
            "Atakunmosa West",
            "Aiyedaade",
            "Aiyedire",
            "Boluwaduro",
            "Boripe",
            "Ede North",
            "Ede South",
            "Ife Central",
            "Ife East",
            "Ife North",
            "Ife South",
            "Egbedore",
            "Ejigbo",
            "Ifedayo",
            "Ifelodun",
            "Ila",
            "Ilesa East",
            "Ilesa West",
            "Irepodun",
            "Irewole",
            "Isokan",
            "Iwo",
            "Obokun",
            "Odo Otin",
            "Ola Oluwa",
            "Olorunda",
            "Oriade",
            "Orolu",
            "Osogbo"
          ]
        },
        {
          "name": "Oyo",
          "cities": [
            "Akinyele",
            "Atiba",
            "Atisbo",
            "Egbeda",
            "Ibadan North",
            "Ibadan North-East",
            "Ibadan North-West",
            "Ibadan South-East",
            "Ibadan South-West",
            "Ibarapa Central",
            "Ibarapa East",
            "Ibarapa North",
            "Ido",
            "Irepo",
            "Iseyin",
            "Itesiwaju",
            "Iwajowa",
            "Kajola",
            "Lagelu",
            "Ogbomosho North",
            "Ogbomosho South",
            "Ogo Oluwa",
            "Olorunsogo",
            "Oluyole",
            "Ona Ara",
            "Orelope",
            "Ori Ire",
            "Oyo",
            "Oyo East",
            "Saki East",
            "Saki West",
            "Surulere"
          ]
        },
        {
          "name": "Plateau",
          "cities": [
            "Barkin Ladi",
            "Bassa",
            "Jos East",
            "Jos North",
            "Jos South",
            "Kanam",
            "Kanke",
            "Langtang South",
            "Langtang North",
            "Mangu",
            "Mikang",
            "Pankshin",
            "Qua'an Pan",
            "Riyom",
            "Shendam",
            "Wase"
          ]
        },
        {
          "name": "Rivers",
          "cities": [
            "Ahoada East",
            "Ahoada West",
            "Akuku-Toru",
            "Andoni",
            "Asari-Toru",
            "Bonny",
            "Degema",
            "Eleme",
            "Emuoha",
            "Etche",
            "Gokana",
            "Ikwerre",
            "Khana",
            "Obio/Akpor",
            "Ogba/Egbema/Ndoni",
            "Ogu/Bolo",
            "Okrika",
            "Omuma",
            "Opobo/Nkoro",
            "Oyigbo",
            "Port Harcourt",
            "Tai"
          ]
        },
        {
          "name": "Sokoto",
          "cities": [
            "Bodinga",
            "Dange Shuni",
            "Gada",
            "Goronyo",
            "Gudu",
            "Gwadabawa",
            "Illela",
            "Isa",
            "Kebbe",
            "Kware",
            "Rabah",
            "Sabon Birni",
            "Shagari",
            "Silame",
            "Sokoto North",
            "Sokoto South",
            "Tambuwal",
            "Tangaza",
            "Tureta",
            "Wamako",
            "Wurno",
            "Yabo"
          ]
        },
        {
          "name": "Taraba",
          "cities": [
            "Bali",
            "Donga",
            "Gashaka",
            "Gassol",
            "Ibi",
            "Jalingo",
            "Karim Lamido",
            "Kumi",
            "Lau",
            "Sardauna",
            "Takum",
            "Ussa",
            "Wukari",
            "Yorro",
            "Zing"
          ]
        },
        {
          "name": "Yobe",
          "cities": [
            "Bursari",
            "Damaturu",
            "Fika",
            "Fune",
            "Geidam",
            "Gujba",
            "Gulani",
            "Jakusko",
            "Karasuwa",
            "Machina",
            "Nangere",
            "Nguru",
            "Potiskum",
            "Tarmuwa",
            "Yunusari",
            "Yusufari"
          ]
        },
        {
          "name": "Zamfara",
          "cities": [
            "Bakura",
            "Birnin Magaji/Kiyaw",
            "Bukkuyum",
            "Bungudu",
            "Gummi",
            "Gusau",
            "Kaura Namoda",
            "Maradun",
            "Maru",
            "Shinkafi",
            "Talata Mafara",
            "Chafe",
            "Zurmi"
          ]
        }
    ];

    const personalDetailsFilled = computed(() => {
        return settingsFormValues.residentialAddress && !settingsFormErrors.value.residentialAddress &&
        settingsFormValues.lga && !settingsFormErrors.value.lga &&
        settingsFormValues.state && !settingsFormErrors.value.state;
    });

    const continuingDirectDebit: Ref<boolean> = ref(false);

    function continueDirectDebit() {
        continuingDirectDebit.value = true;
        emit('@continue-paystack-direct-debit');
        setTimeout(() => {
            continuingDirectDebit.value = false;
        }, 2000);
    }
    
    const savingPersonalDetails: Ref<boolean> = ref(false);

    async function savePersonalDetails(){
        savingPersonalDetails.value = true;
        const result = await apiFetch(
            'profile',
            'PATCH',
            {
                // maritalStatus: settingsFormValues.maritalStatus,
                // levelOfEducation: settingsFormValues.educationLevel,
                address: {
                    street: settingsFormValues.residentialAddress,
                    city: settingsFormValues.lga,
                    state: settingsFormValues.state,
                    country: 'Nigeria'
                },
            }
        );

        if((result as any).success && !(result as any).error){

            if (userProfile.value) {
                userProfile.value.address.city = (result as any).data.profile.address.city;
                userProfile.value.maritalStatus = (result as any).data.profile.maritalStatus;
                userProfile.value.address.state = (result as any).data.profile.address.state;
                userProfile.value.address.street = (result as any).data.profile.address.street;
                userProfile.value.address.country = (result as any).data.profile.address.country;
                userProfile.value.educationLevel = (result as any).data.profile.levelOfEducation;

                continueDirectDebit();
            }

            savingPersonalDetails.value = false;
        }else {
            savingPersonalDetails.value = false;
            // console.log((result as any).error);
        }
    }

    const emit = defineEmits<{
        '@close-paystack-direct-debit-modal': [],
        '@continue-paystack-direct-debit': []
    }>();

</script>